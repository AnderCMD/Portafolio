---
interface Props {
	icon: string;
	title: string;
	subtitle: string;
	description: string;
}

const { icon, title, subtitle, description } = Astro.props;
---

<section class='flex flex-col items-center gap-6 animate-slide-up'>
	{
		icon && (
			<div class='relative'>
				<div class='absolute inset-0 bg-sky-500/20 dark:bg-sky-400/20 blur-2xl rounded-full' />
				<i class={icon + ' relative text-4xl md:text-5xl text-sky-500 dark:text-sky-400 animate-bounce-slow'} />
			</div>
		)
	}
	<div class='space-y-3'>
		<h1 class='text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-center leading-tight'>
			<span
				class='inline-block bg-linear-to-r from-sky-500 via-blue-500 to-indigo-600 dark:from-sky-400 dark:via-blue-400 dark:to-indigo-500 bg-clip-text text-transparent animate-gradient bg-300%'>
				{title}
			</span>
		</h1>
		<h2 class='text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-center'>
			<span
				class='inline-block bg-linear-to-r from-indigo-500 via-purple-500 to-pink-500 dark:from-indigo-400 dark:via-purple-400 dark:to-pink-400 bg-clip-text text-transparent animate-gradient bg-300%'>
				{subtitle}
			</span>
		</h2>
	</div>
	<p
		class='max-w-3xl text-base sm:text-lg lg:text-xl font-medium text-center text-slate-600 dark:text-slate-300 leading-relaxed'
		set:html={description}
	/>
</section>

<script>
	function calculateYearsOfExperience() {
		const startMonth = 5;
		const startYear = 2023;
		const now = new Date();
		const currentYear = now.getFullYear();
		const currentMonth = now.getMonth() + 1;

		const totalMonths = (currentYear - startYear) * 12 + (currentMonth - startMonth);
		const years = Math.round((totalMonths / 12) * 10) / 10;
		return years.toFixed(1); // Ensure 1 decimal place (e.g. "2.7")
	}

	function updateExperience() {
		const years = calculateYearsOfExperience();
		const elements = document.querySelectorAll('.experience-years-count');
		elements.forEach((el) => {
			el.textContent = years;
		});
	}

	// Update on initial load
	updateExperience();

	// Update on view transitions
	document.addEventListener('astro:page-load', updateExperience);
</script>
