---
// Languages
import { useLocale } from '@/Hooks/useLocale';
const { t } = useLocale(Astro);

// Imagenes
import { Image } from 'astro:assets';
import HoroscopoImagen from '@/Assets/Images/Projects/Horoscope.webp';
import CalculatorImagen from '@/Assets/Images/Projects/Calculator.webp';
import GPTLocalImagen from '@/Assets/Images/Projects/GPT-Local.webp';
import AMEDigitalImagen from '@/Assets/Images/Projects/AMEDigital.webp';
import DiagnosticoModernoImagen from '@/Assets/Images/Projects/DiagnosticoModerno.webp';
import EcologiXImagen from '@/Assets/Images/Projects/EcologiX.webp';
import FlappyBatImagen from '@/Assets/Images/Projects/FlappyBat.webp';
import ChatBotImagen from '@/Assets/Images/Projects/ChatBot.webp';
import FrontendMentorImagen from '@/Assets/Images/Projects/Frontend-Mentor.webp';
import WindowsRepairImagen from '@/Assets/Images/Projects/WindowsRepair.webp';
import TasksFlowImagen from '@/Assets/Images/Projects/TasksFlow.webp';
import SETIPOSImagen from '@/Assets/Images/Projects/SETIPOS.webp';
import ResserSaaSImagen from '@/Assets/Images/Projects/ResserSaaS.webp';

const project = [
	{
		type: 'web',
		title: t('Projects.Title.1'),
		description: t('Projects.Description.1'),
		image: HoroscopoImagen,
		linkView: 'https://andercmd.github.io/Desafios-Codedex/Horoscopo/',
		linkCode: 'https://github.com/AnderCMD/Desafios-Codedex/tree/main/Horoscopo',
		year: 2024,
		technologies: ['HTML', 'CSS', 'JavaScript', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.2'),
		description: t('Projects.Description.2'),
		image: CalculatorImagen,
		linkView: 'https://andercmd.github.io/Calculadora/',
		linkCode: 'https://github.com/AnderCMD/Calculadora',
		year: 2023,
		technologies: ['HTML', 'CSS', 'JavaScript', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.3'),
		description: t('Projects.Description.3'),
		image: GPTLocalImagen,
		linkView: 'https://andercmd.github.io/GPT-Local/',
		linkCode: 'https://github.com/AnderCMD/GPT-Local',
		year: 2024,
		technologies: ['HTML', 'CSS', 'JavaScript', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.4'),
		description: t('Projects.Description.4'),
		image: AMEDigitalImagen,
		linkView: 'https://www.amedigital.mx',
		year: 2024,
		technologies: ['Astro', ' React', 'JavaScript', 'TailwindCSS', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.5'),
		description: t('Projects.Description.5'),
		image: DiagnosticoModernoImagen,
		linkView: 'https://www.diagnosticomoderno.com/',
		year: 2023,
		technologies: ['Astro', ' React', 'JavaScript', 'TailwindCSS', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.7'),
		description: t('Projects.Description.7'),
		image: EcologiXImagen,
		linkCode: 'https://github.com/AnderCMD/EcologiX',
		year: 2023,
		technologies: ['React Vite', 'NodeJS Express', 'JavaScript', 'TailwindCSS', 'Arduino', 'Git & GitHub']
	},
	{
		type: 'mobile',
		title: t('Projects.Title.8'),
		description: t('Projects.Description.8'),
		image: FlappyBatImagen,
		linkCode: 'https://github.com/AnderCMD/Flappy-Bat',
		linkDownload: '/Download/APK/Flappy-Bat.apk',
		year: 2022,
		technologies: ['Unity', 'C#']
	},
	{
		type: 'web',
		title: t('Projects.Title.9'),
		description: t('Projects.Description.9'),
		image: ChatBotImagen,
		linkView: 'https://andercmd.github.io/Chat-Bot/',
		linkCode: 'https://github.com/AnderCMD/Chat-Bot',
		year: 2022,
		technologies: ['HTML', 'CSS', 'JavaScript', 'Git & GitHub']
	},
	{
		type: 'web',
		title: t('Projects.Title.10'),
		description: t('Projects.Description.10'),
		image: FrontendMentorImagen,
		linkView: 'https://andercmd.github.io/Desafios-Frontend-Mentor/',
		linkCode: 'https://github.com/AnderCMD/Desafios-Frontend-Mentor/',
		year: 2023,
		technologies: ['React Vite', 'JavaScript', 'HTML', 'CSS', 'TailwindCSS', 'Git & GitHub']
	},
	{
		type: 'other',
		title: t('Projects.Title.11'),
		description: t('Projects.Description.11'),
		image: WindowsRepairImagen,
		linkCode: 'https://github.com/AnderCMD/Fix-Windows',
		linkDownload: '/Download/Scripts/FixWindows.bat',
		year: 2024,
		technologies: ['Batch']
	},
	{
		type: 'web',
		title: t('Projects.Title.12'),
		description: t('Projects.Description.12'),
		image: TasksFlowImagen,
		linkView: 'https://tasksflow.andercmd.dev',
		linkCode: 'https://github.com/AnderCMD/TasksFlow',
		year: 2025,
		technologies: ['Redux', 'React Vite', 'JavaScript', 'TailwindCSS', 'Git & Github']
	},
	{
		type: 'web',
		title: t('Projects.Title.13'),
		description: t('Projects.Description.13'),
		image: SETIPOSImagen,
		year: 2025,
		technologies: ['React Vite', 'JavaScript', 'TypeScript', 'TailwindCSS', 'NodeJS Express', 'MongoDB', 'Docker', 'Git & GitHub'],
	},
	{
		type: 'web',
		title: t('Projects.Title.14'),
		description: t('Projects.Description.14'),
		image: ResserSaaSImagen,
		year: 2025,
		technologies: ['React Vite', 'TypeScript', 'AntDesign', 'C# .Net 8', 'SQL Server', 'Azure', 'Git'],
	}
];
---

<style>
	.filter-item {
		opacity: 1;
		transition:
			opacity 0.2s ease,
			transform 0.2s ease;
		transform: scale(1);
		display: block;
	}

	.filter-item.hide {
		opacity: 0;
		transform: scale(0.9);
	}

	.filter-item.hidden {
		display: none;
	}
</style>

<nav class='flex flex-wrap items-center justify-center gap-3 py-6 md:py-10' aria-label='Filtros de proyectos'>
	<button
		type='button'
		class='filter-button group relative px-6 py-3 text-base font-bold text-white bg-linear-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 rounded-2xl shadow-lg shadow-sky-500/30 hover:shadow-xl hover:shadow-sky-500/40 transition-all duration-300 transform hover:scale-105 active:scale-95 overflow-hidden'
		data-filter='all'>
		<span class='relative z-10'>{t('Projects.Nav.AllCategories')}</span>
		<div class='absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700'></div>
	</button>
	<button
		type='button'
		class='filter-button group px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-linear-to-r hover:from-sky-50 hover:to-blue-50 dark:hover:from-sky-950/50 dark:hover:to-blue-950/50 border-2 border-slate-200 dark:border-slate-700 hover:border-sky-400 dark:hover:border-sky-500 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'
		data-filter='web'>
		<i class='fa-solid fa-globe mr-2 text-sky-500'></i>
		{t('Projects.Nav.Web')}
	</button>
	<button
		type='button'
		class='filter-button group px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-linear-to-r hover:from-emerald-50 hover:to-teal-50 dark:hover:from-emerald-950/50 dark:hover:to-teal-950/50 border-2 border-slate-200 dark:border-slate-700 hover:border-emerald-400 dark:hover:border-emerald-500 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'
		data-filter='mobile'>
		<i class='fa-solid fa-mobile-screen-button mr-2 text-emerald-500'></i>
		{t('Projects.Nav.Mobile')}
	</button>
	<button
		type='button'
		class='filter-button group px-6 py-3 text-base font-semibold text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-linear-to-r hover:from-purple-50 hover:to-pink-50 dark:hover:from-purple-950/50 dark:hover:to-pink-950/50 border-2 border-slate-200 dark:border-slate-700 hover:border-purple-400 dark:hover:border-purple-500 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'
		data-filter='other'>
		<i class='fa-solid fa-folder mr-2 text-purple-500'></i>
		{t('Projects.Nav.Other')}
	</button>
</nav>

<div class='items-stretch justify-center grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3'>
	{
		project
			.sort((a, b) => {
				if (b.year !== a.year) {
					return (b.year || 0) - (a.year || 0); // Sort by year in descending order
				}
				return a.title.localeCompare(b.title); // Sort by title in ascending order
			})
			.map((Project) => (
				<article class={`group min-h-full filter-item all ${Project.type}`}>
					<div class='relative flex flex-col h-full rounded-2xl shadow-lg transition-all duration-300 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:shadow-2xl hover:shadow-sky-500/20 dark:hover:shadow-sky-500/10 hover:-translate-y-2 overflow-hidden'>
						<!-- Glow effect on hover -->
						<div class='absolute inset-0 bg-linear-to-br from-sky-500/0 to-blue-500/0 group-hover:from-sky-500/5 group-hover:to-blue-500/5 transition-all duration-300 pointer-events-none'></div>
						
						<!-- Image Container -->
						<a href={Project.linkView || Project.linkCode} class='relative shrink-0 overflow-hidden' target="_blank">
							<div class='absolute inset-0 bg-linear-to-t from-slate-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10'></div>
							<Image
								class='object-cover w-full h-56 transition-transform duration-500 group-hover:scale-110'
								src={Project.image}
								alt={Project.description}
								loading='lazy'
								decoding='async'
								quality={85}
							/>
							{Project.year && (
								<span class='absolute top-4 right-4 z-20 px-3 py-1.5 text-xs font-bold text-white bg-sky-600/90 dark:bg-sky-500/90 backdrop-blur-sm rounded-full shadow-lg'>
									{Project.year}
								</span>
							)}
						</a>
						
						<!-- Content -->
						<div class='relative flex flex-col grow p-6 space-y-4'>
							<div class='space-y-2'>
								<h3 class='text-xl font-bold text-slate-900 dark:text-white group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors duration-300 line-clamp-2'>
									{Project.title}
								</h3>
								<p class='text-sm text-slate-600 dark:text-slate-400 line-clamp-3 leading-relaxed'>
									{Project.description}
								</p>
							</div>
							
							{/* Tech Stack */}
							{Project.technologies && (
								<div class="flex flex-wrap gap-2">
									{Project.technologies.map((tech) => (
										<span class="inline-flex items-center px-2.5 py-1 text-xs font-semibold rounded-lg bg-linear-to-r from-sky-100 to-blue-100 text-sky-700 dark:from-sky-900/50 dark:to-blue-900/50 dark:text-sky-300 border border-sky-200 dark:border-sky-800">
											{tech}
										</span>
									))}
								</div>
							)}
							
							{/* Action Buttons */}
							<div class='flex items-center gap-2 pt-4 mt-auto border-t border-slate-200 dark:border-slate-700'>
								{Project.linkView && (
									<a
										href={Project.linkView}
										target='_blank'
										rel='noopener noreferrer'
										class='flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-white bg-linear-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'>
										<i class='fa-solid fa-eye text-xs' />
										<span class='hidden sm:inline'>{t('Projects.VisitProject')}</span>
									</a>
								)}
								{Project.linkDownload && (
									<a
										href={Project.linkDownload}
										target='_blank'
										rel='noopener noreferrer'
										class='flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-white bg-linear-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'
										download>
										<i class='fa-solid fa-download text-xs' />
										<span class='hidden sm:inline'>{t('Projects.Download')}</span>
									</a>
								)}
								{Project.linkCode && (
									<a
										href={Project.linkCode}
										target='_blank'
										rel='noopener noreferrer'
										class='flex-1 inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-semibold text-slate-700 dark:text-slate-200 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95'>
										<i class='fa-solid fa-code text-xs' />
										<span class='hidden sm:inline'>{t('Projects.ViewCode')}</span>
									</a>
								)}
							</div>
						</div>
					</div>
				</article>
			))
	}
</div>

<script>
	document.addEventListener('astro:page-load', () => {
		const filterButtons = document.querySelectorAll('.filter-button');
		const filterItems = document.querySelectorAll('.filter-item');

		filterButtons.forEach((button) => {
			button.addEventListener('click', () => {
				const filter = button.getAttribute('data-filter');

				filterItems.forEach((item) => {
					const element = item;

					if (filter === 'all') {
						element.classList.remove('hidden');
						requestAnimationFrame(() => {
							element.classList.remove('hide');
						});
					} else {
						if (filter && item.classList.contains(filter)) {
							element.classList.remove('hidden');
							requestAnimationFrame(() => {
								element.classList.remove('hide');
							});
						} else {
							element.classList.add('hide');
							element.addEventListener(
								'transitionend',
								() => {
									if (element.classList.contains('hide')) {
										element.classList.add('hidden');
									}
								},
								{ once: true }
							);
						}
					}
				});
			});
		});
	});
</script>
