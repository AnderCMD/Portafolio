---
// Languages
import { useLocale } from '@/Hooks/useLocale';
const { t } = useLocale(Astro);

const project = [
	{
		type: 'web',
		title: t('Projects.Title.1'),
		description: t('Projects.Description.1'),
		image: '/Images/Projects/Horoscope.webp',
		linkView: 'https://andercmd.github.io/Desafios-Codedex/Horoscopo/',
		linkCode: 'https://github.com/AnderCMD/Desafios-Codedex/tree/main/Horoscopo',
		year: 2024,
		technologies: ['HTML', 'CSS', 'JavaScript'],
	},
	{
		type: 'web',
		title: t('Projects.Title.2'),
		description: t('Projects.Description.2'),
		image: '/Images/Projects/Calculator.webp',
		linkView: 'https://andercmd.github.io/Calculadora/',
		linkCode: 'https://github.com/AnderCMD/Calculadora',
		year: 2023,
		technologies: ['HTML', 'CSS', 'JavaScript'],
	},
	{
		type: 'web',
		title: t('Projects.Title.3'),
		description: t('Projects.Description.3'),
		image: '/Images/Projects/GPT-Local.webp',
		linkView: 'https://andercmd.github.io/GPT-Local/',
		linkCode: 'https://github.com/AnderCMD/GPT-Local',
		year: 2024,
		technologies: ['HTML', 'CSS', 'JavaScript', 'Llama 3'],
	},
	{
		type: 'web',
		title: t('Projects.Title.4'),
		description: t('Projects.Description.4'),
		image: '/Images/Projects/AMEDigital.webp',
		linkView: 'https://www.amedigital.mx',
		year: 2024,
		technologies: ['Astro', 'TailwindCSS', 'JavaScript'],
	},
	{
		type: 'web',
		title: t('Projects.Title.5'),
		description: t('Projects.Description.5'),
		image: '/Images/Projects/DiagnosticoModerno.webp',
		linkView: 'https://www.diagnosticomoderno.com/',
		year: 2023,
		technologies: ['Astro', 'TailwindCSS', 'JavaScript'],
	},
	{
		type: 'web',
		title: t('Projects.Title.7'),
		description: t('Projects.Description.7'),
		image: '/Images/Projects/EcologiX.webp',
		linkCode: 'https://github.com/AnderCMD/EcologiX',
		year: 2023,
		technologies: ['ExpressJS', 'MongoDB', 'React', 'TailwindCSS', 'Arduino'],
	},
	{
		type: 'mobile',
		title: t('Projects.Title.8'),
		description: t('Projects.Description.8'),
		image: '/Images/Projects/FlappyBat.webp',
		linkCode: 'https://github.com/AnderCMD/Flappy-Bat',
		linkDownload: '/Download/APK/Flappy-Bat.apk',
		year: 2022,
		technologies: ['Unity', 'C#', 'Android'],
	},
	{
		type: 'web',
		title: t('Projects.Title.9'),
		description: t('Projects.Description.9'),
		image: '/Images/Projects/ChatBot.webp',
		linkView: 'https://andercmd.github.io/Chat-Bot/',
		linkCode: 'https://github.com/AnderCMD/Chat-Bot',
		year: 2022,
		technologies: ['HTML', 'CSS', 'JavaScript'],
	},
	{
		type: 'web',
		title: t('Projects.Title.10'),
		description: t('Projects.Description.10'),
		image: '/Images/Projects/Frontend-Mentor.webp',
		linkView: 'https://andercmd.github.io/Desafios-Frontend-Mentor/',
		linkCode: 'https://github.com/AnderCMD/Desafios-Frontend-Mentor/',
		year: 2023,
		technologies: ['HTML', 'CSS', 'JavaScript'],
	},
	{
		type: 'other',
		title: t('Projects.Title.11'),
		description: t('Projects.Description.11'),
		image: '/Images/Projects/WindowsRepair.webp',
		linkCode: 'https://github.com/AnderCMD/Fix-Windows',
		linkDownload: '/Download/Scripts/FixWindows.bat',
		year: 2024,
		technologies: ['Batch Script', 'Windows'],
	},
	{
		type: 'web',
		title: t('Projects.Title.12'),
		description: t('Projects.Description.12'),
		image: '/Images/Projects/TasksFlow.webp',
		linkView: 'https://tasksflow.andercmd.dev',
		linkCode: 'http://github.com/AnderCMD/TasksFlow',
		year: 2025,
		technologies: ['React', 'Redux', 'Vite', 'TailwindCSS'],
	},
];
---

<style>
	@keyframes ripple {
		0% {
			transform: scale(0, 0);
			opacity: 0.7;
		}
		100% {
			transform: scale(25, 25);
			opacity: 0;
		}
	}
	
	.group-hover\:animate-ripple {
		animation: ripple 0.7s ease-out;
	}
</style>

<div class='container mx-auto px-4 mb-8'>
	<div class='flex flex-wrap items-center justify-center py-4 md:py-6 gap-3'>
		<button
			type='button'
			class='filter-button active text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border border-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-full text-sm font-medium px-5 py-2.5 text-center me-3 mb-3 dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700 dark:border-blue-500 dark:focus:ring-blue-800 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105'
			data-filter='all'>
			{t('Projects.Nav.AllCategories')}
		</button>
		<button
			type='button'
			class='filter-button text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border border-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-full text-sm font-medium px-5 py-2.5 text-center me-3 mb-3 dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700 dark:border-blue-500 dark:focus:ring-blue-800 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105'
			data-filter='web'>
			{t('Projects.Nav.Web')}
		</button>
		<button
			type='button'
			class='filter-button text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border border-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-full text-sm font-medium px-5 py-2.5 text-center me-3 mb-3 dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700 dark:border-blue-500 dark:focus:ring-blue-800 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105'
			data-filter='mobile'>
			{t('Projects.Nav.Mobile')}
		</button>
		<button
			type='button'
			class='filter-button text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 border border-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-full text-sm font-medium px-5 py-2.5 text-center me-3 mb-3 dark:from-blue-500 dark:to-blue-600 dark:hover:from-blue-600 dark:hover:to-blue-700 dark:border-blue-500 dark:focus:ring-blue-800 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105'
			data-filter='other'>
			{t('Projects.Nav.Other')}
		</button>
	</div>

	<div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
		{
			project.map((item) => (
				<div class='filter-item opacity-100 scale-100 block transition-all duration-500 ease-in-out' data-category={item.type}>
					<div class='bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 ease-in-out hover:-translate-y-1.5 overflow-hidden relative isolate'>
						<!-- Year Badge -->
						<div class='absolute top-4 right-4 bg-sky-500/90 text-white px-3 py-1 rounded-full font-semibold text-xs shadow-md z-10 backdrop-blur-sm'>
							{item.year}
						</div>

						<!-- Project Image -->
						<div class='relative overflow-hidden'>
							<div class='absolute inset-0 bg-gradient-to-b from-transparent to-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10'></div>
							<img
								src={item.image}
								alt={item.title}
								class='w-full h-48 object-cover transition-transform duration-600 ease-in-out group-hover:scale-106'
							/>
						</div>

						<!-- Project Content -->
						<div class='p-5'>
							<!-- Project Type Tag -->
							<div class='inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-sky-100 text-sky-600 dark:bg-sky-900/30 dark:text-sky-400 mb-2 transition-colors duration-300 ease-in-out'>
								<i class={`mr-1 text-xs fa-solid ${
									item.type === 'web'
										? 'fa-globe'
										: item.type === 'mobile'
										? 'fa-mobile-screen'
										: 'fa-code'
								}`} />
								{item.type === 'web'
									? t('Projects.Nav.Web')
									: item.type === 'mobile'
									? t('Projects.Nav.Mobile')
									: t('Projects.Nav.Other')}
							</div>

							<!-- Project Title -->
							<h3 class='text-xl font-bold text-slate-900 dark:text-white mb-2 line-clamp-1'>{item.title}</h3>

							<!-- Project Description -->
							<p class='text-slate-600 dark:text-slate-300 mb-4 text-sm line-clamp-3'>{item.description}</p>

							<!-- Technologies -->
							<div class='mb-4'>
								{item.technologies.map((tech) => (
									<span class='inline-block text-xs px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 font-medium mr-1.5 mb-1.5 transition-colors duration-200 ease-in-out hover:bg-slate-200 dark:hover:bg-slate-600'>
										{tech}
									</span>
								))}
							</div>

							<!-- Action Buttons -->
							<div class='flex flex-wrap gap-2'>
								{item.linkView && (
									<a
										href={item.linkView}
										target='_blank'
										rel='noopener noreferrer'
										class='inline-flex w-full items-center px-3 py-1.5 text-sm font-medium text-white rounded-lg shadow-sm bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 transition-all duration-300 ease-in-out hover:-translate-y-0.5 hover:shadow-md relative overflow-hidden group'>
										<i class='fa-solid fa-eye mr-1.5' />
										{t('Projects.VisitProject')}
										<span class="absolute top-0 left-0 w-full h-full bg-white/20 opacity-0 scale-x-0 origin-left group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-500 ease-in-out"></span>
									</a>
								)}
								{item.linkDownload && (
									<a
										href={item.linkDownload}
										download
										class='inline-flex w-full items-center px-3 py-1.5 text-sm font-medium text-white rounded-lg shadow-sm bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transition-all duration-300 ease-in-out hover:-translate-y-0.5 hover:shadow-md relative overflow-hidden group'>
										<i class='fa-solid fa-download mr-1.5' />
										{t('Projects.Download')}
										<span class="absolute top-0 left-0 w-full h-full bg-white/20 opacity-0 scale-x-0 origin-left group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-500 ease-in-out"></span>
									</a>
								)}
								{item.linkCode && (
									<a
										href={item.linkCode}
										target='_blank'
										rel='noopener noreferrer'
										class='inline-flex w-full items-center px-3 py-1.5 text-sm font-medium text-white rounded-lg shadow-sm bg-gradient-to-r from-slate-500 to-slate-600 hover:from-slate-600 hover:to-slate-700 transition-all duration-300 ease-in-out hover:-translate-y-0.5 hover:shadow-md relative overflow-hidden group'>
										<i class='fa-solid fa-code mr-1.5' />
										{t('Projects.ViewCode')}
										<span class="absolute top-0 left-0 w-full h-full bg-white/20 opacity-0 scale-x-0 origin-left group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-500 ease-in-out"></span>
									</a>
								)}
							</div>
						</div>
					</div>
				</div>
			))
		}
	</div>
</div>

<script>
	document.addEventListener('astro:page-load', () => {
		// Filter functionality
		const filterButtons = document.querySelectorAll('.filter-button');
		const filterItems = document.querySelectorAll('.filter-item');

		filterButtons.forEach((button) => {
			button.addEventListener('click', () => {
				// Remove active class from all buttons
				filterButtons.forEach((btn) => {
					btn.classList.remove('active', 'scale-105');
				});

				// Add active class to clicked button
				button.classList.add('active', 'scale-105');

				const filterValue = button.getAttribute('data-filter');

				// Filter items
				filterItems.forEach((item) => {
					const category = item.getAttribute('data-category');

					// First remove hidden class to ensure all items are in the DOM
					item.classList.remove('hidden');

					// Then apply hide class for animation
					if (filterValue === 'all' || filterValue === category) {
						item.classList.remove('opacity-0', 'scale-95');
						item.classList.add('opacity-100', 'scale-100');
					} else {
						item.classList.remove('opacity-100', 'scale-100');
						item.classList.add('opacity-0', 'scale-95');
						
						// After animation completes, add hidden class
						setTimeout(() => {
							if (!item.classList.contains('opacity-100')) {
								item.classList.add('hidden');
							}
						}, 500);
					}
				});
			});
		});
	});
</script>
