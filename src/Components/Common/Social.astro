---
import { useLocale } from '@/Hooks/useLocale';

const { t } = useLocale(Astro);

interface Props {
	animation?: 'fade' | 'slide' | 'none';
	hasGlass?: boolean;
	hasShadow?: boolean;
	buttonColor?: string;
	iconHoverColor?: string;
}

const {
	animation = 'fade',
	hasGlass = false,
	hasShadow = false,
	buttonColor = 'bg-gradient-to-r from-sky-500 to-purple-500 hover:from-sky-600 hover:to-purple-600',
	iconHoverColor = 'hover:text-sky-500 dark:hover:text-sky-400',
} = Astro.props;

const animationClass =
	animation === 'fade' ? 'animate-fade-in' : animation === 'slide' ? 'animate-slide-in-bottom' : '';

const socialLinks = [
	{
		url: 'https://github.com/AnderCMD',
		icon: 'fab fa-github',
		label: 'Github',
		delay: '100',
	},
	{
		url: 'https://www.linkedin.com/in/andercmd/',
		icon: 'fab fa-linkedin',
		label: 'LinkedIn',
		delay: '150',
	},
	{
		url: 'mailto:andercmd@outlook.com',
		icon: 'fa-solid fa-envelope',
		label: 'Correo',
		delay: '200',
	},
	{
		url: 'https://x.com/AnderCMDs',
		icon: 'fab fa-x-twitter',
		label: 'X - Twitter',
		delay: '250',
	},
	{
		url: 'https://www.twitch.tv/andercmds',
		icon: 'fab fa-twitch',
		label: 'Twitch',
		delay: '300',
	},
	{
		url: 'https://learn.microsoft.com/es-es/users/andercmd/',
		icon: 'fab fa-microsoft',
		label: 'Microsoft Learn',
		delay: '350',
	},
	{
		url: 'https://developers.google.com/profile/u/AnderCMDs',
		icon: 'fab fa-google',
		label: 'Google Developers',
		delay: '400',
	},
];
---

<section
	class={`relative overflow-hidden transition-all duration-300 ease-in-out py-2 px-3 ${animationClass} 
	${hasGlass ? 'bg-white/5 backdrop-blur-md dark:bg-slate-900/30 border border-white/10 dark:border-slate-700/20' : ''} 
	${hasShadow ? 'p-6 rounded-2xl bg-white/3 shadow-lg border border-slate-200/80 dark:border-slate-700/50 dark:bg-slate-900/3' : ''}`}
	data-aos='fade-up'
	data-aos-duration='600'
	data-aos-once='true'>
	<div class='flex items-center justify-between gap-4 max-md:flex-col'>
		<div class='flex justify-center md:mr-3 w-full md:w-auto' data-aos='fade-right' data-aos-delay='50'>
			<a
				href={t('About.CV.Link')}
				class={`w-full px-5 py-2.5 font-bold text-white rounded-full transition-all duration-300 ease-in-out relative overflow-hidden shadow-md hover:shadow-lg hover:-translate-y-1 ${buttonColor} group`}
				download
				aria-label={t('About.CV')}>
				<span class='flex items-center justify-center gap-2'>
					<i class='fas fa-file-download'></i>
					{t('About.CV')}
				</span>
				<span
					class='absolute top-0 left-0 w-full h-full bg-white/10 opacity-0 scale-x-0 origin-left group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-500 ease-in-out'
				></span>
			</a>
		</div>

		<div class='social-grid grid grid-cols-4 md:grid-cols-7 gap-3 w-full md:w-auto'>
			{
				socialLinks.map((link) => (
					<a
						href={link.url}
						aria-label={link.label}
						target='_blank'
						rel='noopener noreferrer'
						class={`flex items-center justify-center w-12 h-12 transition-all duration-500 ease-in-out rounded-full ${buttonColor} transition-all duration-300 ease-in-out hover:-translate-y-1 hover:scale-105 hover:shadow-md relative group overflow-hidden`}
						data-aos='zoom-in'
						data-aos-duration='500'
						data-aos-delay={link.delay}>
						<i
							class={`${link.icon} text-white transition-all duration-300 ease-in-out text-2xl`}
						/>
						<span
							class='absolute top-0 left-0 w-full h-full bg-white/10 opacity-0 scale-x-0 origin-left group-hover:scale-x-100 group-hover:opacity-100 transition-all duration-500 ease-in-out'
						/>
					</a>
				))
			}
		</div>
	</div>
</section>

<style>
	@keyframes fadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes slideInBottom {
		from {
			transform: translateY(30px);
			opacity: 0;
		}
		to {
			transform: translateY(0);
			opacity: 1;
		}
	}

	.animate-fade-in {
		animation: fadeIn 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
	}

	.animate-slide-in-bottom {
		animation: slideInBottom 0.7s cubic-bezier(0.25, 0.8, 0.25, 1);
	}

	.bg-radial-gradient-sky {
		background: radial-gradient(circle, rgba(14, 165, 233, 0.12) 0%, rgba(14, 165, 233, 0) 70%);
	}
</style>

<script>
	import AOS from 'aos';

	document.addEventListener('astro:page-load', () => {
		// Initialize AOS with custom settings
		AOS.init({
			duration: 600,
			easing: 'ease-out-cubic',
			once: true,
			offset: 30,
			disableMutationObserver: false,
		});

		// Hide tooltips on mobile devices
		if (window.innerWidth < 768) {
			const tooltips = document.querySelectorAll('.tooltip');
			tooltips.forEach((tooltip) => {
				if (tooltip instanceof HTMLElement) {
					tooltip.style.display = 'none';
				}
			});
		}
	});
</script>
