---
interface Props {
	icon: string;
	title: string;
	subtitle: string;
	description: string;
	animation?: 'fade' | 'slide' | 'none';
	titleClass?: string;
	subtitleClass?: string;
	align?: 'center' | 'left' | 'right';
	iconColor?: string;
	hasDecoration?: boolean;
	hasShadow?: boolean;
	hasGlass?: boolean;
}

const {
	icon,
	title,
	subtitle,
	description,
	animation = 'fade',
	titleClass = 'text-transparent bg-clip-text bg-gradient-to-r from-sky-500 to-purple-500 dark:from-sky-400 dark:to-purple-400',
	subtitleClass = 'text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-sky-500 dark:from-purple-400 dark:to-sky-400',
	align = 'center',
	iconColor = 'text-sky-500 dark:text-sky-400',
	hasDecoration = true,
	hasShadow = false,
	hasGlass = false,
} = Astro.props;

const animationClass =
	animation === 'fade' ? 'animate-fade-in' : animation === 'slide' ? 'animate-slide-in-bottom' : '';

const alignClass = {
	center: 'items-center',
	left: 'items-start',
	right: 'items-end',
}[align];

const textAlignClass = {
	center: 'text-center',
	left: 'text-left',
	right: 'text-right',
}[align];
---

<section
	class={`relative overflow-hidden transition-all duration-300 ease-in-out py-3 flex flex-col gap-5 ${alignClass} ${animationClass} 
	${hasShadow ? 'p-7 rounded-2xl bg-white/3 shadow-lg border border-slate-200/80 dark:border-slate-700/50 dark:bg-slate-900/3' : ''} 
	${hasGlass ? 'bg-white/5 backdrop-blur-md dark:bg-slate-900/30 border border-white/10 dark:border-slate-700/20' : ''}`}
	role='region'
	aria-label={title}
	data-aos='fade-up'
	data-aos-duration='600'
	data-aos-once='true'>
	<i
		class={`text-4xl md:text-5xl ${icon} ${iconColor} transition-all duration-300 ease-in-out group-hover:scale-110 group-hover:rotate-3 filter drop-shadow-md hover:drop-shadow-lg relative z-10 group`}>
		<span
			class='absolute inset-0 -z-10 bg-radial-gradient-sky opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-in-out scale-150'
		></span>
	</i>

	<div class={`relative w-full mb-5 ${textAlignClass}`}>
		<h2 class='text-xl font-extrabold text-slate-900 dark:text-white md:text-2xl lg:text-3xl mb-2'>
			<span class={titleClass}>{title}</span>
		</h2>

		<h3 class='text-lg font-bold text-slate-900 dark:text-white md:text-xl lg:text-2xl'>
			<span class={subtitleClass}>{subtitle}</span>
		</h3>

		{
			hasDecoration && (
				<div
					class={`h-0.5 w-15 mt-2 bg-gradient-to-r from-sky-100 via-sky-500/50 to-sky-100 dark:from-sky-900/10 dark:via-sky-500/50 dark:to-sky-900/10 rounded-full mx-auto ${align === 'left' ? 'ml-0 mr-auto' : align === 'right' ? 'mr-0 ml-auto' : ''}`}
				/>
			)
		}
	</div>

	<p
		class='font-normal text-slate-600 dark:text-slate-300 max-w-prose leading-7 text-base md:text-lg transition-transform duration-300 ease-in-out hover:-translate-y-0.5 w-full'>
		{description}
	</p>
</section>

<style>
	@keyframes fadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes slideInBottom {
		from {
			transform: translateY(20px);
			opacity: 0;
		}
		to {
			transform: translateY(0);
			opacity: 1;
		}
	}

	.animate-fade-in {
		animation: fadeIn 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
	}

	.animate-slide-in-bottom {
		animation: slideInBottom 0.7s cubic-bezier(0.25, 0.8, 0.25, 1);
	}

	.bg-radial-gradient-sky {
		background: radial-gradient(circle, rgba(14, 165, 233, 0.1) 0%, rgba(14, 165, 233, 0) 70%);
	}
</style>

<script>
	import AOS from 'aos';

	document.addEventListener('astro:page-load', () => {
		// Initialize AOS with custom settings
		AOS.init({
			duration: 600,
			easing: 'ease-out-cubic',
			once: true,
			offset: 30,
			disableMutationObserver: false,
		});
	});
</script>
